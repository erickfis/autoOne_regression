{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Linear regression - OLS Model\n",
    "\n",
    "In this section, we will cover:\n",
    "\n",
    "- fitting an OLS linear regression model\n",
    "- score analysis: MSE and variance explained: $R^2$\n",
    "- residual analysis"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import pickle\n",
    "import time"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>symboling</th>\n",
       "      <th>make</th>\n",
       "      <th>fuel_type</th>\n",
       "      <th>aspiration</th>\n",
       "      <th>num_of_doors</th>\n",
       "      <th>body_style</th>\n",
       "      <th>drive_wheels</th>\n",
       "      <th>engine_location</th>\n",
       "      <th>wheel_base</th>\n",
       "      <th>length</th>\n",
       "      <th>...</th>\n",
       "      <th>engine_size</th>\n",
       "      <th>fuel_system</th>\n",
       "      <th>bore</th>\n",
       "      <th>stroke</th>\n",
       "      <th>compression_ratio</th>\n",
       "      <th>horsepower</th>\n",
       "      <th>peak_rpm</th>\n",
       "      <th>city_mpg</th>\n",
       "      <th>highway_mpg</th>\n",
       "      <th>price</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2</td>\n",
       "      <td>mitsubishi</td>\n",
       "      <td>gas</td>\n",
       "      <td>std</td>\n",
       "      <td>two</td>\n",
       "      <td>hatchback</td>\n",
       "      <td>fwd</td>\n",
       "      <td>front</td>\n",
       "      <td>93.7</td>\n",
       "      <td>157.3</td>\n",
       "      <td>...</td>\n",
       "      <td>92</td>\n",
       "      <td>2bbl</td>\n",
       "      <td>2.97</td>\n",
       "      <td>3.23</td>\n",
       "      <td>9.4</td>\n",
       "      <td>68.0</td>\n",
       "      <td>5500.0</td>\n",
       "      <td>37</td>\n",
       "      <td>41</td>\n",
       "      <td>5389.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1</td>\n",
       "      <td>dodge</td>\n",
       "      <td>gas</td>\n",
       "      <td>std</td>\n",
       "      <td>four</td>\n",
       "      <td>sedan</td>\n",
       "      <td>fwd</td>\n",
       "      <td>front</td>\n",
       "      <td>93.7</td>\n",
       "      <td>157.3</td>\n",
       "      <td>...</td>\n",
       "      <td>90</td>\n",
       "      <td>2bbl</td>\n",
       "      <td>2.97</td>\n",
       "      <td>3.23</td>\n",
       "      <td>9.4</td>\n",
       "      <td>68.0</td>\n",
       "      <td>5500.0</td>\n",
       "      <td>31</td>\n",
       "      <td>38</td>\n",
       "      <td>6692.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0</td>\n",
       "      <td>jaguar</td>\n",
       "      <td>gas</td>\n",
       "      <td>std</td>\n",
       "      <td>two</td>\n",
       "      <td>sedan</td>\n",
       "      <td>rwd</td>\n",
       "      <td>front</td>\n",
       "      <td>102.0</td>\n",
       "      <td>191.7</td>\n",
       "      <td>...</td>\n",
       "      <td>326</td>\n",
       "      <td>mpfi</td>\n",
       "      <td>3.54</td>\n",
       "      <td>2.76</td>\n",
       "      <td>11.5</td>\n",
       "      <td>262.0</td>\n",
       "      <td>5000.0</td>\n",
       "      <td>13</td>\n",
       "      <td>17</td>\n",
       "      <td>36000.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0</td>\n",
       "      <td>peugot</td>\n",
       "      <td>gas</td>\n",
       "      <td>std</td>\n",
       "      <td>four</td>\n",
       "      <td>sedan</td>\n",
       "      <td>rwd</td>\n",
       "      <td>front</td>\n",
       "      <td>107.9</td>\n",
       "      <td>186.7</td>\n",
       "      <td>...</td>\n",
       "      <td>120</td>\n",
       "      <td>mpfi</td>\n",
       "      <td>3.46</td>\n",
       "      <td>3.19</td>\n",
       "      <td>8.4</td>\n",
       "      <td>97.0</td>\n",
       "      <td>5000.0</td>\n",
       "      <td>19</td>\n",
       "      <td>24</td>\n",
       "      <td>11900.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0</td>\n",
       "      <td>subaru</td>\n",
       "      <td>gas</td>\n",
       "      <td>turbo</td>\n",
       "      <td>four</td>\n",
       "      <td>sedan</td>\n",
       "      <td>fwd</td>\n",
       "      <td>front</td>\n",
       "      <td>97.0</td>\n",
       "      <td>172.0</td>\n",
       "      <td>...</td>\n",
       "      <td>108</td>\n",
       "      <td>mpfi</td>\n",
       "      <td>3.62</td>\n",
       "      <td>2.64</td>\n",
       "      <td>7.7</td>\n",
       "      <td>111.0</td>\n",
       "      <td>4800.0</td>\n",
       "      <td>24</td>\n",
       "      <td>29</td>\n",
       "      <td>11259.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 25 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   symboling        make fuel_type aspiration num_of_doors body_style  \\\n",
       "0          2  mitsubishi       gas        std          two  hatchback   \n",
       "1          1       dodge       gas        std         four      sedan   \n",
       "2          0      jaguar       gas        std          two      sedan   \n",
       "3          0      peugot       gas        std         four      sedan   \n",
       "4          0      subaru       gas      turbo         four      sedan   \n",
       "\n",
       "  drive_wheels engine_location  wheel_base  length  ...  engine_size  \\\n",
       "0          fwd           front        93.7   157.3  ...           92   \n",
       "1          fwd           front        93.7   157.3  ...           90   \n",
       "2          rwd           front       102.0   191.7  ...          326   \n",
       "3          rwd           front       107.9   186.7  ...          120   \n",
       "4          fwd           front        97.0   172.0  ...          108   \n",
       "\n",
       "   fuel_system  bore stroke compression_ratio  horsepower peak_rpm  city_mpg  \\\n",
       "0         2bbl  2.97   3.23               9.4        68.0   5500.0        37   \n",
       "1         2bbl  2.97   3.23               9.4        68.0   5500.0        31   \n",
       "2         mpfi  3.54   2.76              11.5       262.0   5000.0        13   \n",
       "3         mpfi  3.46   3.19               8.4        97.0   5000.0        19   \n",
       "4         mpfi  3.62   2.64               7.7       111.0   4800.0        24   \n",
       "\n",
       "   highway_mpg    price  \n",
       "0           41   5389.0  \n",
       "1           38   6692.0  \n",
       "2           17  36000.0  \n",
       "3           24  11900.0  \n",
       "4           29  11259.0  \n",
       "\n",
       "[5 rows x 25 columns]"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.read_csv('data/df_resample.csv')\n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "RangeIndex: 10000 entries, 0 to 9999\n",
      "Data columns (total 25 columns):\n",
      " #   Column             Non-Null Count  Dtype  \n",
      "---  ------             --------------  -----  \n",
      " 0   symboling          10000 non-null  int64  \n",
      " 1   make               10000 non-null  object \n",
      " 2   fuel_type          10000 non-null  object \n",
      " 3   aspiration         10000 non-null  object \n",
      " 4   num_of_doors       10000 non-null  object \n",
      " 5   body_style         10000 non-null  object \n",
      " 6   drive_wheels       10000 non-null  object \n",
      " 7   engine_location    10000 non-null  object \n",
      " 8   wheel_base         10000 non-null  float64\n",
      " 9   length             10000 non-null  float64\n",
      " 10  width              10000 non-null  float64\n",
      " 11  height             10000 non-null  float64\n",
      " 12  curb_weight        10000 non-null  int64  \n",
      " 13  engine_type        10000 non-null  object \n",
      " 14  num_of_cylinders   10000 non-null  object \n",
      " 15  engine_size        10000 non-null  int64  \n",
      " 16  fuel_system        10000 non-null  object \n",
      " 17  bore               10000 non-null  float64\n",
      " 18  stroke             10000 non-null  float64\n",
      " 19  compression_ratio  10000 non-null  float64\n",
      " 20  horsepower         10000 non-null  float64\n",
      " 21  peak_rpm           10000 non-null  float64\n",
      " 22  city_mpg           10000 non-null  int64  \n",
      " 23  highway_mpg        10000 non-null  int64  \n",
      " 24  price              10000 non-null  float64\n",
      "dtypes: float64(10), int64(5), object(10)\n",
      "memory usage: 1.9+ MB\n"
     ]
    }
   ],
   "source": [
    "df.info()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Train-test split\n",
    "\n",
    "To avoid overfitting, we will split our data on train and test sets.\n",
    "\n",
    "The model will be trained with the train dataset and later we will evaluate it with the test set.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.model_selection import train_test_split\n",
    "\n",
    "X = df.copy()\n",
    "X.drop('price', axis=1, inplace=True)\n",
    "y = np.log(df.price) # as discussed, we are going to use the log transformation here\n",
    "\n",
    "X_train, X_test, y_train, y_test = train_test_split(\n",
    "    X, y, test_size=.3, random_state=95276\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Feature Selection\n",
    "\n",
    "It is very important to carefully chose which features will be included into the model, because:\n",
    "\n",
    "- including unnecessary features increases the standard error of the coefficients\n",
    "- excluding necessary features results in bias\n",
    "\n",
    "### Selection through correlation\n",
    "\n",
    "We will start selecting features through their correlation with the dependent variable price: if it has correlation, the feature will be included in the model.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['wheel_base',\n",
       " 'length',\n",
       " 'width',\n",
       " 'height',\n",
       " 'curb_weight',\n",
       " 'engine_size',\n",
       " 'bore',\n",
       " 'stroke',\n",
       " 'compression_ratio',\n",
       " 'horsepower',\n",
       " 'peak_rpm',\n",
       " 'city_mpg',\n",
       " 'highway_mpg']"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# categorical features\n",
    "with open('data/category_list', 'rb') as file:\n",
    "    cat_cols = pickle.load(file)\n",
    "\n",
    "# numeric columns\n",
    "num_cols = [col for col in X_train.columns if col not in cat_cols]\n",
    "num_cols"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\BJ571WQ\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:1: SettingWithCopyWarning: \n",
      "A value is trying to be set on a copy of a slice from a DataFrame.\n",
      "Try using .loc[row_indexer,col_indexer] = value instead\n",
      "\n",
      "See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n",
      "  \"\"\"Entry point for launching an IPython kernel.\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "bore           0.598414\n",
       "wheel_base     0.613096\n",
       "length         0.771923\n",
       "city_mpg       0.786216\n",
       "highway_mpg    0.787066\n",
       "width          0.792462\n",
       "horsepower     0.825041\n",
       "engine_size    0.848821\n",
       "curb_weight    0.886872\n",
       "price          1.000000\n",
       "Name: price, dtype: float64"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "X_train['price'] = y_train\n",
    "cols = num_cols + ['price']\n",
    "cor = X_train[cols].corr().abs()\n",
    "cor.loc[cor.price > .5, 'price'].sort_values()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "correlated:  Index(['bore', 'wheel_base', 'length', 'city_mpg', 'highway_mpg', 'width',\n",
      "       'horsepower', 'engine_size', 'curb_weight'],\n",
      "      dtype='object')\n",
      "not correlated:  ['height', 'stroke', 'compression_ratio', 'peak_rpm']\n"
     ]
    }
   ],
   "source": [
    "mask = (cor.price > .5 ) & (cor.price < 1)\n",
    "correlated = cor[mask].sort_values(by='price').index\n",
    "not_correlated = [col for col in num_cols if col not in correlated]\n",
    "\n",
    "print('correlated: ', correlated)\n",
    "print('not correlated: ', not_correlated)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Fitting the model\n",
    "### Formula for OLS"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'price ~ C(make) + C(fuel_type) + C(aspiration) + C(num_of_doors) + C(body_style) + C(drive_wheels) + C(engine_location) + C(engine_type) + C(num_of_cylinders) + C(fuel_system) + C(symboling) + bore + wheel_base + length + city_mpg + highway_mpg + width + horsepower + engine_size + curb_weight'"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cat_list = [f'C({cat})' for cat in cat_cols]\n",
    "cat_formula = ' + '.join(cat_list)\n",
    "num_formula = ' + '.join(correlated)\n",
    "\n",
    "formula = f'price ~ {cat_formula} + {num_formula}'\n",
    "formula"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:                  price   R-squared:                       0.969\n",
      "Model:                            OLS   Adj. R-squared:                  0.969\n",
      "Method:                 Least Squares   F-statistic:                     3974.\n",
      "Date:                Sun, 05 Jul 2020   Prob (F-statistic):               0.00\n",
      "Time:                        17:32:34   Log-Likelihood:                 7310.9\n",
      "No. Observations:                7000   AIC:                        -1.451e+04\n",
      "Df Residuals:                    6944   BIC:                        -1.413e+04\n",
      "Df Model:                          55                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "=================================================================================================\n",
      "                                    coef    std err          t      P>|t|      [0.025      0.975]\n",
      "-------------------------------------------------------------------------------------------------\n",
      "Intercept                         4.6632      0.069     68.022      0.000       4.529       4.798\n",
      "C(make)[T.audi]                   0.2956      0.019     15.375      0.000       0.258       0.333\n",
      "C(make)[T.bmw]                    0.3424      0.017     20.031      0.000       0.309       0.376\n",
      "C(make)[T.chevrolet]             -0.0681      0.017     -3.992      0.000      -0.102      -0.035\n",
      "C(make)[T.dodge]                 -0.1279      0.013     -9.512      0.000      -0.154      -0.102\n",
      "C(make)[T.honda]                  0.1801      0.017     10.442      0.000       0.146       0.214\n",
      "C(make)[T.isuzu]                 -0.4496      0.020    -21.959      0.000      -0.490      -0.409\n",
      "C(make)[T.jaguar]                -0.0461      0.023     -2.045      0.041      -0.090      -0.002\n",
      "C(make)[T.mazda]                 -0.0055      0.013     -0.415      0.678      -0.031       0.020\n",
      "C(make)[T.mercedes-benz]          0.0272      0.020      1.374      0.169      -0.012       0.066\n",
      "C(make)[T.mercury]               -0.0428      0.022     -1.935      0.053      -0.086       0.001\n",
      "C(make)[T.mitsubishi]            -0.1235      0.014     -8.977      0.000      -0.150      -0.097\n",
      "C(make)[T.nissan]                 0.0136      0.013      1.071      0.284      -0.011       0.038\n",
      "C(make)[T.peugot]                -0.2410      0.015    -16.161      0.000      -0.270      -0.212\n",
      "C(make)[T.plymouth]              -0.1567      0.013    -11.827      0.000      -0.183      -0.131\n",
      "C(make)[T.porsche]                0.3308      0.023     14.121      0.000       0.285       0.377\n",
      "C(make)[T.saab]                   0.1715      0.016     10.707      0.000       0.140       0.203\n",
      "C(make)[T.subaru]                -0.2159      0.013    -16.104      0.000      -0.242      -0.190\n",
      "C(make)[T.toyota]                -0.1388      0.012    -11.412      0.000      -0.163      -0.115\n",
      "C(make)[T.volkswagen]            -0.0227      0.014     -1.620      0.105      -0.050       0.005\n",
      "C(make)[T.volvo]                 -0.0245      0.016     -1.539      0.124      -0.056       0.007\n",
      "C(fuel_type)[T.gas]               2.2090      0.034     64.306      0.000       2.142       2.276\n",
      "C(aspiration)[T.turbo]            0.1450      0.006     23.509      0.000       0.133       0.157\n",
      "C(num_of_doors)[T.two]           -0.0467      0.004    -10.799      0.000      -0.055      -0.038\n",
      "C(body_style)[T.hardtop]         -0.1813      0.010    -18.215      0.000      -0.201      -0.162\n",
      "C(body_style)[T.hatchback]       -0.1730      0.009    -19.543      0.000      -0.190      -0.156\n",
      "C(body_style)[T.sedan]           -0.1713      0.010    -17.712      0.000      -0.190      -0.152\n",
      "C(body_style)[T.wagon]           -0.2424      0.010    -23.417      0.000      -0.263      -0.222\n",
      "C(drive_wheels)[T.rwd]            0.1974      0.006     30.737      0.000       0.185       0.210\n",
      "C(engine_location)[T.rear]        0.3251      0.016     19.825      0.000       0.293       0.357\n",
      "C(engine_type)[T.l]              -0.1174      0.013     -8.956      0.000      -0.143      -0.092\n",
      "C(engine_type)[T.ohc]            -0.0469      0.009     -5.183      0.000      -0.065      -0.029\n",
      "C(engine_type)[T.ohcf]            0.1092      0.008     12.869      0.000       0.093       0.126\n",
      "C(engine_type)[T.ohcv]           -0.0731      0.010     -7.206      0.000      -0.093      -0.053\n",
      "C(num_of_cylinders)[T.five]      -0.1078      0.023     -4.660      0.000      -0.153      -0.062\n",
      "C(num_of_cylinders)[T.four]      -0.0978      0.029     -3.387      0.001      -0.154      -0.041\n",
      "C(num_of_cylinders)[T.six]       -0.1420      0.021     -6.704      0.000      -0.184      -0.101\n",
      "C(num_of_cylinders)[T.three]      0.1236      0.023      5.424      0.000       0.079       0.168\n",
      "C(num_of_cylinders)[T.twelve]     0.0422      0.031      1.352      0.176      -0.019       0.103\n",
      "C(fuel_system)[T.2bbl]            0.2101      0.013     16.521      0.000       0.185       0.235\n",
      "C(fuel_system)[T.idi]             2.4543      0.036     68.950      0.000       2.384       2.524\n",
      "C(fuel_system)[T.mfi]             0.3084      0.022     13.772      0.000       0.264       0.352\n",
      "C(fuel_system)[T.mpfi]            0.3012      0.013     22.682      0.000       0.275       0.327\n",
      "C(fuel_system)[T.spdi]            0.2448      0.015     15.895      0.000       0.215       0.275\n",
      "C(fuel_system)[T.spfi]            0.6067      0.026     23.575      0.000       0.556       0.657\n",
      "C(symboling)[T.-1]                0.0912      0.010      8.811      0.000       0.071       0.111\n",
      "C(symboling)[T.0]                 0.0977      0.012      8.436      0.000       0.075       0.120\n",
      "C(symboling)[T.1]                 0.0058      0.012      0.475      0.635      -0.018       0.030\n",
      "C(symboling)[T.2]                -0.0021      0.013     -0.166      0.868      -0.027       0.023\n",
      "C(symboling)[T.3]                 0.0956      0.014      7.016      0.000       0.069       0.122\n",
      "bore                             -0.1315      0.015     -8.541      0.000      -0.162      -0.101\n",
      "wheel_base                        0.0075      0.001      9.770      0.000       0.006       0.009\n",
      "length                           -0.0031      0.000     -7.449      0.000      -0.004      -0.002\n",
      "city_mpg                         -0.0193      0.001    -18.415      0.000      -0.021      -0.017\n",
      "highway_mpg                       0.0134      0.001     14.778      0.000       0.012       0.015\n",
      "width                             0.0236      0.002     12.433      0.000       0.020       0.027\n",
      "horsepower                       -0.0004      0.000     -2.489      0.013      -0.001   -9.17e-05\n",
      "engine_size                       0.0014      0.000      6.032      0.000       0.001       0.002\n",
      "curb_weight                       0.0004   1.11e-05     36.620      0.000       0.000       0.000\n",
      "==============================================================================\n",
      "Omnibus:                       43.470   Durbin-Watson:                   2.040\n",
      "Prob(Omnibus):                  0.000   Jarque-Bera (JB):               39.363\n",
      "Skew:                          -0.142   Prob(JB):                     2.83e-09\n",
      "Kurtosis:                       2.766   Cond. No.                     1.02e+16\n",
      "==============================================================================\n",
      "\n",
      "Warnings:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
      "[2] The smallest eigenvalue is 4.53e-22. This might indicate that there are\n",
      "strong multicollinearity problems or that the design matrix is singular.\n"
     ]
    }
   ],
   "source": [
    "import statsmodels.formula.api as smf\n",
    "\n",
    "start = time.time()\n",
    "model = smf.ols(formula=formula, data=X_train)\n",
    "stop = time.time()\n",
    "\n",
    "elapsed = stop - start\n",
    "res = model.fit()\n",
    "print(res.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## More feature selection: p-values\n",
    "\n",
    "When we fit a linear regression model, we have to test the hypothesis that the evaluated coefficients for each regressor is actually zero, meaning we don't need the regressor at all.\n",
    "\n",
    "In other words, we have:\n",
    "\n",
    "- $H_0$: the coefficient is zero\n",
    "- $H_1$: the coefficient is not zero\n",
    "\n",
    "Therefore, let's look into the p-values for each coefficient for each regressor to understand if they should be zero:\n",
    "\n",
    "*if a p-value of a given coefficient is larger than 5%, then we fail to reject the null hypothesis that the coefficient actually is zero*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "C(make)[T.mazda]                 0.678023\n",
       "C(make)[T.mercedes-benz]         0.169382\n",
       "C(make)[T.mercury]               0.053000\n",
       "C(make)[T.nissan]                0.284175\n",
       "C(make)[T.volkswagen]            0.105253\n",
       "C(make)[T.volvo]                 0.123909\n",
       "C(num_of_cylinders)[T.twelve]    0.176399\n",
       "C(symboling)[T.1]                0.635092\n",
       "C(symboling)[T.2]                0.868250\n",
       "dtype: float64"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "res.pvalues[res.pvalues > .05]\n",
    "# we are not taking out make just because a few rotten apples"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "As we can see, only the p-values for some makers are larger than 5%. We are not removing this feature.\n",
    "\n",
    "All other p-values are smaller than 5%, so no additional feature selection will be done."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Model Scoring & Evaluation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "R^2: 0.969\n",
      "MSE: 1.211e+06\n"
     ]
    }
   ],
   "source": [
    "r2 = res.rsquared_adj\n",
    "\n",
    "predictions = np.exp(res.predict(X_test)) # back transformation\n",
    "mse = np.mean(\n",
    "    (predictions - np.exp(y_test))**2\n",
    ")\n",
    "\n",
    "print(f'R^2: {r2:.4}')\n",
    "print(f'MSE: {mse:.4}')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>model name</th>\n",
       "      <th>r2</th>\n",
       "      <th>MSE</th>\n",
       "      <th>time</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>ols</td>\n",
       "      <td>0.968962</td>\n",
       "      <td>1.211086e+06</td>\n",
       "      <td>0.701995</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  model name        r2           MSE      time\n",
       "0        ols  0.968962  1.211086e+06  0.701995"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data = {\n",
    "    'model name': ['ols'],\n",
    "    'r2': [r2],\n",
    "    'MSE': [mse],\n",
    "    'time': elapsed\n",
    "       }\n",
    "\n",
    "score_df = pd.DataFrame(data)\n",
    "score_df.to_csv('data/scores.csv', index=False)\n",
    "score_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "\n",
    "\n",
    "## Residual analysis\n",
    "\n",
    "In a good model, we should expect that the residuals:\n",
    "\n",
    "- have mean zero\n",
    "- to be homoscedastic\n",
    "- to be normal\n",
    "- to have no correlation with the fitted values\n",
    "- to have no correlation with any of the features"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Residual mean"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "3.466027465037769e-13"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "res.resid.mean() # good!"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Residuals vs fitted values"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.legend.Legend at 0x1a7827ec8c8>"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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KixLIignjPoFAAB4W+7Cctr6+/s1bdo0jR8/Xvvss4++/OUv6y9/+YskadGiRTr22GO3es4tt9yiyZMn64Mf/KDe//7365JLLkm0jGHlaHYeAACAsiMsN8HdNX36dB1//PF68skn9cQTT2jdunU655xzQp+zYcMGzZkzRzfffLMeeughLV68WFOmTOlcoQEAANCyQoflJauX6PxF52v2TbN1/qLztWT1kraWd9ddd6mrq0tf+MIXJEnDhw/XRRddpMsuu0xvvvlm3ee8/vrr2rhxo8aMGSNJ2m677bTffvttNd/555+vmTNn6uijj9bYsWM1f/58ffWrX9XEiRM1depUbdiwQZK0cOFCTZ48WRMnTtTs2bO1fv16SdIvf/lLTZgwQYcccojmz5+/eblvvPGGZs+erYMOOkiTJ0/WTTfd1FYdAAAAlElhw/KS1Ut04b0Xau2f16p7ZLfW/nmtLrz3wrYC87Jly3TggQdu8djIkSPV09Oj5cuX133O6NGjddxxx2nvvffWKaecop/85Cd666236s771FNP6dZbb9VNN92kGTNm6PDDD9fDDz+s7bffXrfeeqsGBgY0a9YsXXfddXr44Ye1ceNG/fCHP9TAwIC++MUv6uabb9Y999yj1atXb17mBRdcoCOOOEL333+/7r77bp111ll64403Wq4DAACAMilsWJ7/2HyN6hqlUduP0jAbplHbj9KorlGa/9j8oZ8cwt3rXgAX9vigSy+9VAsXLtTBBx+sCy+8ULNnz6473zHHHKMRI0Zo4sSJ2rRpk6ZOnSpJmjhxolasWKHHH39c48aN07777itJmjlzpn7zm9/oscce07hx4zR+/HiZmWbMmLF5mXfccYfmzp2rSZMmacqUKRoYGNDKlStbrgMAAIAyydV9lpux8tWV6h7ZvcVjO3XtpJWvth4U999/f91www1bPPbaa6/pueee0z777KM1a9aEPnfixImaOHGiTj31VI0bN05XXHHFVvNst912kqRhw4ZpxIgRmwP4sGHDtHHjRrl76PLDwrq764Ybbthq6McLL7wQuiwAAABUFLZnuWenHr068OoWj7068Kp6duppeZlHHnmk3nzzTV111VWSpE2bNukrX/mKZs2apR122KHuc9atW6dFixZt/v/BBx/U3nvv3dL6J0yYoBUrVmwe8nH11VfrsMMO04QJE/TM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\n",
      "text/plain": [
       "<Figure size 864x360 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "from numpy.polynomial.polynomial import polyfit\n",
    "import matplotlib.pyplot as plt\n",
    "\n",
    "%matplotlib inline\n",
    "\n",
    "plt.figure(figsize=(12, 5))\n",
    "plt.title('fitted price vs resids')\n",
    "plt.scatter(res.fittedvalues, res.resid, c=\"g\", alpha=0.5, label=\"OLS model\")\n",
    "b, m = polyfit(res.fittedvalues, res.resid, 1)\n",
    "plt.plot(res.fittedvalues, b + m * res.fittedvalues, '-')\n",
    "plt.xlabel(\"\")\n",
    "plt.ylabel(\"\")\n",
    "plt.legend(loc=2)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Correlation between residuals and $\\hat y$\n",
    "\n",
    "In a good model, residuals cannot be correlated to the fitted values. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(7.525074313674551e-13, 0.9999999999534074)"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from scipy.stats.stats import pearsonr\n",
    "pearsonr(res.predict(X_train), res.resid)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Test for normality"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\BJ571WQ\\Anaconda3\\lib\\site-packages\\scipy\\stats\\morestats.py:1676: UserWarning: p-value may not be accurate for N > 5000.\n",
      "  warnings.warn(\"p-value may not be accurate for N > 5000.\")\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "(0.9936643838882446, 4.235666338594954e-17)"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import scipy.stats as st\n",
    "st.shapiro(res.resid)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "from statsmodels.graphics.gofplots import qqplot\n",
    "\n",
    "qqplot(res.resid, line='s');"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
